"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[884],{8884:(e,n,r)=>{r.r(n),r.d(n,{default:()=>h});var i=r(3239),o=r(1582),t=r(4358),a=r(697),l=r(890),s=r(7763),c=r(4294),d=r(7924),x=r(5294),p=r(2791),u=r(184);const h=()=>{const[e,n]=(0,p.useState)(!1),[r,h]=(0,p.useState)("search"),[m,g]=(0,p.useState)(null),[v,f]=(0,p.useState)(""),[j,Z]=(0,p.useState)(null),S=async()=>{n(!0);const e=await w();if(e){Z(e),h("voucher");const n=e.Promo;n&&(n.remaining<=0&&g("Promo ini sudah habis diklaim."),new Date(n.expiry)<new Date&&g("Promo ini sudah berakhir.")),e.claimed&&g("Voucher ini sudah pernah diklaim pada ".concat(k(e.claimedAt),"."))}n(!1)},b=async()=>{n(!0),g(null);try{await x.Z.post("/api/vouchers/".concat(v,"/redeem"))}catch(o){if(x.Z.isAxiosError(o)){var e,r;const n=null===(e=o.response)||void 0===e?void 0:e.data;g(null!==(r=null===n||void 0===n?void 0:n.error)&&void 0!==r?r:"Error hahaha")}else{var i;g(null!==(i=null===o||void 0===o?void 0:o.message)&&void 0!==i?i:"Error hahaha")}}h("result"),n(!1)},w=async()=>{g(null);try{return(await x.Z.get("/api/vouchers/".concat(v))).data}catch(i){if(x.Z.isAxiosError(i)){var e,n;const r=null===(e=i.response)||void 0===e?void 0:e.data;g(null!==(n=null===r||void 0===r?void 0:r.error)&&void 0!==n?n:"")}else{var r;g(null!==(r=null===i||void 0===i?void 0:i.message)&&void 0!==r?r:"")}return null}},k=e=>new Date(e).toLocaleDateString("id",{year:"numeric",month:"long",day:"numeric"}),y=()=>{Z(null),h("search"),g(null)};return e?(0,u.jsx)(i.Z,{}):"search"===r?(0,u.jsxs)(o.Z,{direction:"column",sx:{width:"100%",height:"100dvh",justifyContent:"center"},children:[m&&(0,u.jsx)(t.Z,{severity:"error",children:m}),(0,u.jsx)(a.Z,{flexGrow:"1"}),(0,u.jsx)(l.Z,{textAlign:"center",marginTop:"10px",fontSize:"15pt",children:"Cek voucher:"}),(0,u.jsx)(s.Z,{inputProps:{style:{textAlign:"center",fontSize:"20pt"}},sx:{mx:"20px"},value:v,onChange:e=>f(e.target.value.toUpperCase())}),(0,u.jsx)(a.Z,{flexGrow:"1"}),(0,u.jsx)(c.Z,{type:"submit",sx:{backgroundColor:"black",color:"white",mx:"20px",mb:"20px",p:"15px",textTransform:"none",fontSize:"20pt",borderRadius:"20px"},variant:"contained",onClick:S,children:"Cari"})]}):"voucher"===r?(0,u.jsxs)(o.Z,{direction:"column",sx:{width:"100%"},children:[m&&(0,u.jsx)(t.Z,{severity:"error",children:m}),(0,u.jsx)(l.Z,{alignSelf:"center",marginTop:"10px",fontSize:"15pt",children:"Kode voucher:"}),(0,u.jsx)(l.Z,{fontWeight:"bold",textAlign:"center",fontSize:"30pt",textTransform:"uppercase",children:null===j||void 0===j?void 0:j.code}),(0,u.jsx)(d.Z,{}),(null===j||void 0===j?void 0:j.Promo)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("img",{src:"/".concat(j.Promo.image),width:"80%",style:{alignSelf:"center",marginTop:"20px"}}),(0,u.jsx)(l.Z,{fontWeight:"bold",alignSelf:"center",marginTop:"20px",fontSize:"18pt",children:j.Promo.name}),(0,u.jsx)(l.Z,{alignSelf:"center",marginTop:"10px",fontSize:"12pt",children:j.Promo.description}),(0,u.jsxs)(l.Z,{alignSelf:"center",marginTop:"20px",children:["Berlaku sampai ",k(j.Promo.expiry),"."]}),!m&&(0,u.jsx)(c.Z,{type:"submit",sx:{backgroundColor:"black",color:"white",mx:"20px",mt:"20px",mb:"20px",p:"15px",textTransform:"none",fontSize:"20pt",borderRadius:"20px"},variant:"contained",onClick:b,children:"Klaim"})]})]}):"result"===r?(0,u.jsxs)(o.Z,{direction:"column",sx:{width:"100%"},children:[(0,u.jsx)(a.Z,{flexGrow:"1"}),m?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.Z,{fontWeight:"bold",alignSelf:"center",marginTop:"20px",fontSize:"30pt",children:"Klaim gagal..."}),(0,u.jsx)(l.Z,{alignSelf:"center",marginTop:"10px",fontSize:"12pt",children:m})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.Z,{fontWeight:"bold",alignSelf:"center",marginTop:"20px",fontSize:"30pt",children:"Klaim berhasil!"}),(0,u.jsx)(l.Z,{alignSelf:"center",marginTop:"10px",fontSize:"12pt",children:null===j||void 0===j||null===(T=j.Promo)||void 0===T?void 0:T.description})]}),(0,u.jsx)(a.Z,{flexGrow:"1"}),(0,u.jsx)(c.Z,{type:"submit",sx:{backgroundColor:"black",color:"white",mx:"20px",mb:"20px",p:"15px",textTransform:"none",fontSize:"20pt",borderRadius:"20px"},variant:"contained",onClick:y,children:"Kembali"})]}):(0,u.jsx)("div",{});var T}}}]);
//# sourceMappingURL=884.b6542c7e.chunk.js.map